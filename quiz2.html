<script>
  const quizData = [
    {
      question: "1. Aus welchen zwei Hauptteilen besteht ein HTML-Dokument?",
      answers: [
        "<header> und <footer>",
        "<head> und <body>",
        "<div> und <span>",
        "<title> und <link>"
      ],
      correct: 1
    },
    // ... (rest of your questions unchanged)
  ];

  const quizContainer = document.getElementById("quiz");

  // ✅ Escape HTML special characters safely
  function escapeHTML(str) {
    return str
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;");
  }

  function loadQuiz() {
    quizContainer.innerHTML = ""; // clear old content

    const form = document.createElement("form");

    quizData.forEach((q, index) => {
      const qDiv = document.createElement("div");
      qDiv.classList.add("question-block");

      // Use escaped text
      qDiv.innerHTML = `
        <div class="question">${escapeHTML(q.question)}</div>
        <div class="answers">
          ${q.answers
            .map(
              (a, i) =>
                `<label><input type="radio" name="q${index}" value="${i}"> ${escapeHTML(a)}</label>`
            )
            .join("")}
        </div>
      `;

      form.appendChild(qDiv);
    });

    const btn = document.createElement("button");
    btn.type = "button";
    btn.textContent = "Auswerten";
    btn.onclick = checkAnswers;
    form.appendChild(btn);

    const resultDiv = document.createElement("div");
    resultDiv.id = "result";
    form.appendChild(resultDiv);

    quizContainer.appendChild(form);
  }

  function checkAnswers() {
    let score = 0;
    const questionBlocks = document.querySelectorAll(".question-block");

    questionBlocks.forEach((block, i) => {
      const selected = block.querySelector("input[type='radio']:checked");
      const labels = block.querySelectorAll("label");
      labels.forEach((l) => l.classList.remove("correct", "incorrect"));

      if (selected) {
        const answerIndex = parseInt(selected.value);
        if (answerIndex === quizData[i].correct) {
          labels[answerIndex].classList.add("correct");
          score++;
        } else {
          labels[answerIndex].classList.add("incorrect");
          labels[quizData[i].correct].classList.add("correct");
        }
      } else {
        labels[quizData[i].correct].classList.add("correct");
      }
    });

    document.getElementById("result").textContent =
      `✅ Du hast ${score} von ${quizData.length} Fragen richtig beantwortet.`;
  }

  loadQuiz();
</script>
